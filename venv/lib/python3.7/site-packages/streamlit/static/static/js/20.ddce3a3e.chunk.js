(window["webpackJsonpstreamlit-browser"]=window["webpackJsonpstreamlit-browser"]||[]).push([[20],{1241:function(e,t,r){"use strict";var n=r(19),a=r.n(n),o=r(25),i=r(6),c=r(14),l=r(12),u=r(13),s=r(0),g=r.n(s),p=r(42),h=r(136),f=r.n(h),d=r(11),m=r(1383),y=r(122),b=r.n(y),w=r(32),v=function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(u.a)(t,e),t}(Object(m.a)(Error)),k=function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(u.a)(t,e),t}(Object(m.a)(Error)),O=function(){function e(){Object(i.a)(this,e)}return Object(d.a)(e,null,[{key:"get",value:function(){var t=Object(o.a)(a.a.mark(function t(){var r,n,o;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(r=w.a.current,n=r.commandLine,o=r.userMapboxToken,e.token&&e.commandLine===n.toLowerCase()){t.next=10;break}if(""===o){t.next=6;break}e.token=o,t.next=9;break;case 6:return t.next=8,this.fetchToken("https://data.streamlit.io/tokens.json","mapbox");case 8:e.token=t.sent;case 9:e.commandLine=n.toLowerCase();case 10:return t.abrupt("return",e.token);case 11:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"fetchToken",value:function(){var e=Object(o.a)(a.a.mark(function e(t,r){var n,o;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,b.a.get(t);case 3:if(n=e.sent,null!=(o=n.data["mapbox-localhost"])&&""!==o){e.next=7;break}throw new Error('Missing token "'.concat(r,'"'));case 7:return e.abrupt("return",o);case 10:throw e.prev=10,e.t0=e.catch(0),new k("".concat(e.t0.message," (").concat(t,")"));case 13:case"end":return e.stop()}},e,null,[[0,10]])}));return function(t,r){return e.apply(this,arguments)}}()}]),e}();O.token=void 0,O.commandLine=void 0,O.isRunningLocal=function(){var e=window.location.hostname;return"localhost"===e||"127.0.0.1"===e};var x=r(209),L=function(e){var t=e.error,r=e.width,n=e.deltaType;return t instanceof v?g.a.createElement(x.a,{width:r,name:"No Mapbox token provided",message:g.a.createElement(g.a.Fragment,null,g.a.createElement("p",null,"To use ",g.a.createElement("code",null,"st.",n)," or ",g.a.createElement("code",null,"st.map")," you need to set up a Mapbox access token."),g.a.createElement("p",null,"To get a token, create an account at"," ",g.a.createElement("a",{href:"https://mapbox.com"},"https://mapbox.com"),". It's free for moderate usage levels!"),g.a.createElement("p",null,"Once you have a token, just set it using the Streamlit config option ",g.a.createElement("code",null,"mapbox.token")," and don't forget to restart your Streamlit server at this point if it's still running, then reload this tab."),g.a.createElement("p",null,"See"," ",g.a.createElement("a",{href:"https://docs.streamlit.io/cli.html#view-all-config-options"},"our documentation")," ","for more info on how to set config options."))}):t instanceof k?g.a.createElement(x.a,{width:r,name:"Error fetching Streamlit Mapbox token",message:g.a.createElement(g.a.Fragment,null,g.a.createElement("p",null,"This app requires an internet connection."),g.a.createElement("p",null,"Please check your connection and try again."),g.a.createElement("p",null,"If you think this is a bug, please file bug report"," ",g.a.createElement("a",{href:"https://github.com/streamlit/streamlit/issues/new/choose"},"here"),"."))}):g.a.createElement(x.a,{width:r,name:"Error fetching Streamlit Mapbox token",message:t.message})},C=r(208);t.a=function(e){return function(t){var r=function(r){function n(r){var u;return Object(i.a)(this,n),(u=Object(c.a)(this,Object(l.a)(n).call(this,r))).initMapboxToken=Object(o.a)(a.a.mark(function e(){var t;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,O.get();case 3:t=e.sent,u.setState({mapboxToken:t,isFetching:!1}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),u.setState({mapboxTokenError:e.t0,isFetching:!1});case 10:case"end":return e.stop()}},e,null,[[0,7]])})),u.render=function(){var r=u.state,n=r.mapboxToken,a=r.mapboxTokenError,o=r.isFetching,i=u.props.width;return a?g.a.createElement(L,{width:i,error:a,deltaType:e}):o?g.a.createElement(C.a,{element:Object(p.g)("Loading...").get("alert"),width:i}):g.a.createElement(t,Object.assign({mapboxToken:n},u.props))},u.state={isFetching:!0,mapboxToken:void 0,mapboxTokenError:void 0},u.initMapboxToken(),u}return Object(u.a)(n,r),n}(s.PureComponent);return r.displayName="withMapboxToken(".concat(t.displayName||t.name,")"),f()(r,t)}}},1405:function(e,t){},1410:function(e,t){},1412:function(e,t){},1420:function(e,t){},1440:function(e,t){},1690:function(e,t,r){},2385:function(e,t,r){"use strict";r.r(t);var n=r(36),a=r(6),o=r(11),i=r(14),c=r(12),l=r(13),u=r(0),s=r.n(u),g=r(1400),p=r.n(g),h=r(1389),f=r(107),d=r(214),m=r(1241);r(1399),r(1690);function y(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function b(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?y(r,!0).forEach(function(t){Object(n.a)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):y(r).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var w=function(e){function t(){var e,r;Object(a.a)(this,t);for(var n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return(r=Object(i.a)(this,(e=Object(c.a)(t)).call.apply(e,[this].concat(o)))).state={initialized:!1},r}return Object(l.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.setState({initialized:!0})}},{key:"getViewport",value:function(){var e=this.props.element.get("spec");return(e?JSON.parse(e):{}).viewport||{}}},{key:"generateViewState",value:function(e){var t=this.props,r=t.element,n=t.width,a=t.height,o=r.get("useContainerWidth");return{width:!e.width||o?n:e.width,height:e.height||a,longitude:e.longitude||0,latitude:e.latitude||0,pitch:e.pitch||0,bearing:e.bearing||0,zoom:e.zoom||1}}},{key:"render",value:function(){var e=this.getViewport(),t=this.generateViewState(e),r=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light-v9";if(e.startsWith("http://")||e.startsWith("https://")||e.startsWith("mapbox://"))return e;return"mapbox://styles/mapbox/".concat(e)}(e.mapStyle);return s.a.createElement("div",{className:"deckglchart stDeckGlChart",style:{height:t.height,width:t.width}},s.a.createElement(p.a,{initialViewState:t,height:t.height,width:t.width,controller:!0,layers:this.state.initialized?this.buildLayers():[]},s.a.createElement(h.StaticMap,{height:t.height,width:t.width,mapStyle:r,mapboxApiAccessToken:this.props.mapboxToken})))}},{key:"buildLayers",value:function(){return this.props.element.get("layers").map(function(e){return function(e){var t=Object(f.d)(e.get("data")),r=JSON.parse(e.get("spec")),n=r.type?r.type.toLowerCase():"";switch(delete r.type,function(e,t){if(k.has(e)&&t.getLatitude&&t.getLongitude){var r=t.getLatitude,n=t.getLongitude;t.getPosition=function(e){return[e[n],e[r]]}}if(O.has(e)&&t.getLatitude&&t.getLongitude&&t.getTargetLatitude&&t.getTargetLongitude){var a=t.getLatitude,o=t.getLongitude,i=t.getTargetLatitude,c=t.getTargetLongitude;t.getSourcePosition=function(e){return[e[o],e[a]]},t.getTargetPosition=function(e){return[e[c],e[i]]}}if(x.has(e)&&t.getColorR&&t.getColorG&&t.getColorB){var l=t.getColorR,u=t.getColorG,s=t.getColorB,g=t.getColorA;t.getColor=function(e){return[e[l],e[u],e[s],e[g]]}}if(L.has(e)&&t.getColorR&&t.getColorG&&t.getColorB&&t.getTargetColorR&&t.getTargetColorG&&t.getTargetColorB){var p=t.getColorR,h=t.getColorG,f=t.getColorB,d=t.getColorA,m=t.getTargetColorR,y=t.getTargetColorG,b=t.getTargetColorB,w=t.getTargetColorA;t.getSourceColor=function(e){return[e[p],e[h],e[f],e[d]]},t.getTargetColor=function(e){return[e[m],e[y],e[b],e[w]]}}Object.keys(t).forEach(function(e){if(e.startsWith("get")){var r=t[e];t[e]="function"===typeof r?r:"string"===typeof r?function(e){return e[r]}:function(){return r}}})}(n,r),n){case"arclayer":return new g.ArcLayer(b({data:t},v.ArcLayer,{},r));case"gridlayer":return new g.GridLayer(b({data:t},v.GridLayer,{},r));case"hexagonlayer":return new g.HexagonLayer(b({data:t},v.HexagonLayer,{},r));case"linelayer":return new g.LineLayer(b({data:t},v.LineLayer,{},r));case"pointcloudlayer":return new g.PointCloudLayer(b({data:t},v.PointCloudLayer,{},r));case"scatterplotlayer":return new g.ScatterplotLayer(b({data:t},v.ScatterplotLayer,{},r));case"screengridlayer":return new g.ScreenGridLayer(b({data:t},v.ScreenGridLayer,{},r));case"textlayer":return new g.TextLayer(b({data:t},v.TextLayer,{},r));default:throw new Error('Unsupported layer type "'.concat(n,'"'))}}(e)}).toArray()}}]),t}(u.PureComponent);w.defaultProps={height:500};var v={ArcLayer:{getSourceColor:function(e){return e.colorR&&e.colorG&&e.colorB?[e.colorR,e.colorG,e.colorB,null==e.colorA?255:e.colorA]:E},getTargetColor:function(e){return e.targetColorR&&e.targetColorG&&e.targetColorB?[e.targetColorR,e.targetColorG,e.targetColorB,null==e.targetColorA?255:e.targetColorA]:E},getSourcePosition:j,getTargetPosition:T},GridLayer:{getPosition:j},HexagonLayer:{getPosition:j},LineLayer:{getSourcePosition:j,getTargetPosition:T},PointCloudLayer:{getColor:S,getPosition:function(e){return[C(e.longitude,e.lon,e.positionX,e.x),C(e.latitude,e.lat,e.positionY,e.y),C(e.latitude,e.lat,e.positionZ,e.z)]},getNormal:function(e){return[e.normalX,e.normalY,e.normalZ]}},ScatterplotLayer:{getColor:S,getPosition:j,getRadius:function(e){return C(e.radius,100)}},ScreenGridLayer:{getPosition:j,getWeight:function(e){return e.weight}},TextLayer:{getColor:S,getPixelOffset:function(e){return[C(e.pixelOffsetX,0),C(e.pixelOffsetY,0)]},getPosition:j,getAlignmentBaseline:"bottom"}};var k=new Set(["gridlayer","hexagonlayer","scatterplotlayer","screengridlayer","textlayer"]),O=new Set(["arclayer","linelayer"]),x=new Set(["pointcloudlayer","scatterplotlayer","textlayer"]),L=new Set(["arclayer"]);function C(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];for(var n=0;n<t.length;n+=1)if(null!=t[n])return t[n];return null}function j(e){return[C(e.longitude,e.lon),C(e.latitude,e.lat)]}function T(e){return[C(e.longitude2,e.lon2),C(e.latitude2,e.lat2)]}var E=[200,30,0,160];function S(e){return e.colorR&&e.colorG&&e.colorB?[e.colorR,e.colorG,e.colorB,null==e.colorA?255:e.colorA]:E}var P=Object(m.a)("st.deck_gl_chart")(Object(d.a)(w));r.d(t,"default",function(){return P})}}]);
//# sourceMappingURL=20.ddce3a3e.chunk.js.map